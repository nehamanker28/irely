{"version":3,"sources":["./src/app/pages/configuration-table-update/configuration-table-update-routing.module.ts","./src/app/pages/configuration-table-update/configuration-table-update.module.ts","./src/app/pages/configuration-table-update/configuration-table-update.page.ts","./src/app/pages/configuration-table-update/configuration-table-update.page.scss","./src/app/pages/configuration-table-update/configuration-table-update.page.html"],"names":[],"mappings":"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","file":"src_app_pages_configuration-table-update_configuration-table-update_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ConfigurationTableUpdatePage } from './configuration-table-update.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConfigurationTableUpdatePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConfigurationTableUpdatePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConfigurationTableUpdatePageRoutingModule } from './configuration-table-update-routing.module';\n\nimport { ConfigurationTableUpdatePage } from './configuration-table-update.page';\n\nimport { CommonSQL } from '../../framework/_common/sqlite/implementation/common-sql';\nimport { Message } from '../../framework/_common/base/message';\nimport { i21SyncDeviceService } from '../../providers/i21syncdevice.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConfigurationTableUpdatePageRoutingModule\n  ],\n  declarations: [ConfigurationTableUpdatePage],\n  providers: [\n    Message,\n    CommonSQL,\n    i21SyncDeviceService\n  ]\n})\nexport class ConfigurationTableUpdatePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController, LoadingController } from '@ionic/angular';\n\nimport { Message } from '../../framework/_common/base/message';\nimport { i21SyncDeviceService } from '../../providers/i21syncdevice.service';\nimport { SyncDeviceDataBRL } from '../../framework/brl/implementation/syncdevicedata';\nimport { OrderBRL } from '../../framework/brl/implementation/order';\nimport { GlobalInfoBRL } from '../../framework/brl/implementation/globalinfo';\nimport { CommonSQL } from '../../framework/_common/sqlite/implementation/common-sql';\nimport { SyncDeviceData } from '../../framework/models/syncdevicedata';\n\n@Component({\n  selector: 'app-configuration-table-update',\n  templateUrl: './configuration-table-update.page.html',\n  styleUrls: ['./configuration-table-update.page.scss'],\n})\nexport class ConfigurationTableUpdatePage implements OnInit {\n  data: any[];\n  globalInfo: any;\n\n  constructor(public navCtrl: NavController,\n    public loadingCtrl: LoadingController, \n    private messageUtil: Message,\n    private i21syncDeviceService: i21SyncDeviceService,\n    private syncDeviceDataBRL: SyncDeviceDataBRL,\n    private commonSQL: CommonSQL,\n    private orderBrl: OrderBRL) {}\n\n  ngOnInit() {\n    console.log('ConfigurationTableUpdatePage');\n    this.tableStatus();\n    this.userGlobalInfo();\n  }\n\n  userGlobalInfo() {\n    var me = this;\n    me.commonSQL.getDataQuery('select * from globalinfo where ysnLogged = \\'true\\'').then(res => {      \n      console.log(res);\n      if(res[0]) {\n        me.globalInfo = res[0];\n      }\n    });\n  }\n\n  async tableStatus() {\n    var me = this;\n\n    const loader = await this.loadingCtrl.create({\n      message: 'Loading data...',\n      duration: 0,\n      spinner: 'circles',\n      backdropDismiss: true\n    });\n    loader.present();\n\n    var _record = new SyncDeviceData();\n    me.commonSQL.getData(_record.tablename).then(res => {\n      me.data = res;\n      console.log(me.data);\n      loader.dismiss();\n    }); \n  }\n\n async updateData(item) {    \n    var me = this;\n    console.log(item);\n\n    const loader = await this.loadingCtrl.create({\n      message: 'Fetching data...',\n      duration: 0,\n      spinner: 'circles',\n      backdropDismiss: true\n    });\n    loader.present();\n\n    me.i21syncDeviceService.getGenerateExport(me.globalInfo.intDriverNumber, item.strTableName, \"\").then(res=>{\n      console.log('getGenerateExport: ' + res);   \n      loader.dismiss();\n    });\n  }\n\n  updateDeviceDataList(item: SyncDeviceData, loader: any, records: any, entity: any, data: any) {\n    var me = this,\n        _now = new Date();\n\n    return new Promise ((resolve, reject) => {\n\n      me.commonSQL.createTable(entity).then(res => {\n        if(records.length < 1){\n          loader.dismiss();\n          resolve(res);\n        }\n        me.orderBrl.addBulk(entity,data).then(res => {\n          item.dtmTableLastUpdated = _now.toLocaleDateString() + ' ' + _now.toLocaleTimeString();\n\n          var record = new SyncDeviceData();\n          record.dtmTableLastUpdated = item.dtmTableLastUpdated;\n          record.intTableStatus = item.intTableStatus;\n          record.strDisplayName = item.strDisplayName;\n          record.strTableName = item.strTableName;\n          record.ysnTableWithErrors = item.ysnTableWithErrors;\n          record.intTotal = records.total || records.length;\n          record.ysnIncludeSyncAll = item.ysnIncludeSyncAll;\n\n          me.syncDeviceDataBRL.update(record).then(res => {\n            console.log(res);\n            loader.dismiss();\n            resolve(res);\n          });        \n          \n        }) ;\n      });\n    });\n    \n  }\n\n  noData(loader: any) {\n    var me = this;\n\n    me.messageUtil.showAlertInfoMessage(\"No data received.\");\n    loader.dismiss();\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb25maWd1cmF0aW9uLXRhYmxlLXVwZGF0ZS5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Update Table</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <br>\\n  <ion-grid>\\n    <ion-row justify-content-start>\\n      <ion-col size=\\\"3\\\" text-left><ion-label text-left><b>Table Name</b></ion-label></ion-col>\\n      <ion-col size=\\\"3\\\" text-left><ion-label><b>Last Update</b></ion-label></ion-col>\\n      <ion-col size=\\\"3\\\" text-left><ion-label><b>Include on Sync All</b></ion-label></ion-col>\\n      <ion-col size=\\\"3\\\" text-left></ion-col>\\n    </ion-row>\\n    <ion-row justify-content-start *ngFor=\\\"let item of data; let i=index\\\" >\\n      <ion-col size=\\\"3\\\" text-left *ngIf=\\\"item.ysnVisible === 'true'\\\" >\\n        <ion-label>{{item.strDisplayName}}</ion-label>          \\n      </ion-col>\\n      <ion-col size=\\\"3\\\" text-left *ngIf=\\\"item.ysnVisible === 'true'\\\" >\\n        <ion-label>{{item.dtmTableLastUpdated}}</ion-label>          \\n      </ion-col>\\n      <ion-col size=\\\"3\\\" text-left *ngIf=\\\"item.ysnVisible === 'true'\\\" >\\n        <ion-toggle [(ngModel)]=\\\"item['ysnIncludeSyncAll']\\\" checked=\\\"item['ysnIncludeSyncAll']\\\" color=\\\"primary\\\"></ion-toggle>\\n      </ion-col>\\n      <ion-col size=\\\"3\\\" text-left *ngIf=\\\"item.ysnVisible === 'true'\\\" >\\n        <ion-button ion-button expand=\\\"block\\\" primary size=\\\"large\\\"item-end icon-left (click)=\\\"updateData(item)\\\">\\n          <ion-icon name=\\\"cloud-download-outline\\\" style=\\\"margin-right: 5px;\\\"></ion-icon>\\n          Update\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n</ion-content>\";"],"sourceRoot":"webpack:///"}