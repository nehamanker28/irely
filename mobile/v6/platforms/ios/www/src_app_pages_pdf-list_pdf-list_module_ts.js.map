{"version":3,"sources":["./src/app/pages/pdf-list/pdf-list-routing.module.ts","./src/app/pages/pdf-list/pdf-list.module.ts","./src/app/pages/pdf-list/pdf-list.page.ts","./src/app/pages/pdf-list/pdf-list.page.scss","./src/app/pages/pdf-list/pdf-list.page.html"],"names":[],"mappings":"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","file":"src_app_pages_pdf-list_pdf-list_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PdfListPage } from './pdf-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PdfListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PdfListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PdfListPageRoutingModule } from './pdf-list-routing.module';\nimport { GlobalInfoBRL } from '../../framework/brl/implementation/globalinfo';\nimport { PdfListPage } from './pdf-list.page';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\nimport { CommonSQL } from '../../framework/_common/sqlite/implementation/common-sql';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PdfListPageRoutingModule,\n  ],\n  declarations: [PdfListPage],\n  providers: [\n    File,\n    FileOpener,\n    CommonSQL,\n    GlobalInfoBRL,\n  ]\n})\nexport class PdfListPageModule {}\n","import { Component, OnInit } from '@angular/core';\n\nimport { NavController, AlertController } from '@ionic/angular';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\nimport { CommonSQL } from '../../framework/_common/sqlite/implementation/common-sql';\nimport { tblMBILPDF } from '../../framework/models/tblMBILPDF';\nimport { GlobalInfo } from '../../framework/models/globalinfo';\n\n@Component({\n  selector: 'app-pdf-list',\n  templateUrl: './pdf-list.page.html',\n  styleUrls: ['./pdf-list.page.scss'],\n})\nexport class PdfListPage implements OnInit {\n    data: any;\n    searchValue: any;\n    pdflist:tblMBILPDF[];\n    shiftNo:number = 0;\n    searchString:string = \"\";\n    constructor(public navCtrl: NavController,\n                private file: File,\n                private fileOpener: FileOpener,\n                private alertCtrl: AlertController,\n                private commonSQL:CommonSQL) {\n    }\n\n    ngOnInit() {\n    }\n\n    ionViewDidEnter() {\n      console.log('ionViewDidLoad ViewPdfPage');\n      // this.getPDFList();\n      this.getPDFTable();\n    }\n\n    getPDFList() {\n      var me = this;\n\n      me.file.listDir(me.file.dataDirectory,'reports').then((result)=>{\n        console.log(result);\n        var _files = [];\n\n        for(let file of result){\n          var _file = {type: '',filename:'',fullpath:'',datecreated: '',visible: 'false'};\n\n          if(file.isFile == true){\n            console.log(file);\n            _file.type = file.name.substr(0,file.name.indexOf('_')).replace(/-/g,' ');\n            _file.filename = file.name;\n            _file.fullpath = file.nativeURL;\n\n            if(_file.type === 'Delivery Out Of Gas') {\n              _file.visible = 'true';\n            }\n\n            _files.push(_file);\n          }\n        }\n\n        me.data = _files;\n        console.log(me.data);\n      });\n    }\n\n    getSearchPDFList() {\n\n    }\n\n    openPDF(item) {\n\n      console.log(item);\n      this.fileOpener.open(item.fullpath, 'application/pdf');\n    }\n\n\n    openPDF2(filename){\n      let me = this,\n          filepath = me.file.dataDirectory + \"reports/\";\n\n      me.fileOpener.open(filepath + filename, 'application/pdf');\n    }\n\n    async deleteReport(item) {\n      var me = this;\n      console.log(item);\n\n      let confirm = await me.alertCtrl.create({\n        message: 'Are you sure you want to delete this?',\n        buttons: [\n          {\n            text: 'Yes',\n            handler: () => {\n              me.file.removeFile(item.fullpath.replace('/' + item.filename, ''),item.filename);\n              me.getPDFList();\n            }\n          },\n          {\n            text: 'No',\n            handler: () => {\n\n            }\n          }\n        ]\n      });\n      confirm.present();\n    }\n\n   getPDFTable(){\n    let me = this;\n    me.commonSQL.getDataQuery('select * from globalinfo where ysnLogged = \\'true\\'').then(res => {\n      let globalinfo = res[0];\n      me.commonSQL.getDataQuery(\"Select * from tblMBILPDF where intDriverId = \" + globalinfo.intDriverNumber + \" order by intPDFId desc\").then(result=>{\n        console.log('data from tblMBILPDF');\n        me.pdflist = result;\n        console.log(me.pdflist);\n      })\n      // me.commonSQL.getData('tblMBILPDF').then(res=>{\n      //   console.log('data from tblMBILPDF');\n\n      //   me.pdflist = res.filter(x=> x.intDriverId == globalinfo.intDriverNumber);\n      //   console.log(me.pdflist);\n      // })\n    })\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwZGYtbGlzdC5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar class=\\\"my-toolbar box-shadow\\\" >\\n    <ion-grid no-padding>\\n      <ion-row large>\\n        <ion-col size=\\\"10\\\" style=\\\"padding: 5px 0px 5px 0px\\\">\\n          <ion-item>\\n            <ion-label><b>File Name</b></ion-label>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col></ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <!-- <ion-list >\\n    <ion-row *ngFor=\\\"let item of data\\\" >\\n      <ion-col size=\\\"10\\\" style=\\\"padding: 5px 0px 5px 0px\\\" (click)='openPDF(item)'>\\n        <ion-item>\\n          <ion-label>{{item.filename}}</ion-label>\\n        </ion-item>\\n      </ion-col>\\n      <ion-col size=\\\"2\\\" >\\n        <ion-item>\\n          <ion-button ion-button expand=\\\"block\\\" outline item-end icon-left style=\\\"padding: 5px 0px 5px 0px\\\" (click)=\\\"deleteReport(item)\\\" *ngIf=\\\"item.visible === 'true'\\\">\\n            <ion-icon name=\\\"ios-close\\\"></ion-icon>\\n            Delete\\n          </ion-button>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n  </ion-list> -->\\n\\n  <ion-list *ngFor=\\\"let item of pdflist; index as i\\\">\\n      <ion-list-header lines=\\\"inset\\\" *ngIf=\\\"i == 0 || (i > 0 && pdflist[i-1].intShiftId != item.intShiftId)\\\" color=\\\"primary\\\">\\n        <ion-label>\\n          <h2>{{item.dtShiftDate | date:'fullDate'}} (Shift No. {{item.intShiftId}})</h2>\\n        </ion-label>\\n      </ion-list-header>\\n      <ion-item (click)='openPDF2(item.strFileName)'>\\n        <ion-label>\\n          <p>{{item.strFileName}}</p>\\n        </ion-label>\\n      </ion-item>\\n  </ion-list>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}